# SyrFisTek

International Pistachio & Agricultural Products Exchange Platform in Syria (SyrFisTek)

منصة سيرفستك (SyrFisTek) هي نظام سوق إلكتروني ومزادات للمنتجات الزراعية في سورية مع دعم كامل لتعدد الشركات (Multi-Tenant)، تعدد اللغات، الصلاحيات الشجرية (RBAC)، الفترات المحاسبية، العملات وأسعار الصرف، ووحدة ذكاء اصطناعي لتقييم جودة المنتجات.

## المكدس التقني
- **Frontend:** React + TypeScript + Vite + TailwindCSS
- **Backend:** tRPC + Drizzle ORM + MySQL
- **تنظيم المشروع:** تقسيم واضح إلى صفحات، مكونات مشتركة، سياقات، ميزات، خوادم tRPC، ومكتبات مساعدة.

## البدء السريع
1) تثبيت الاعتمادات:
   ```bash
   npm install
   ```
2) تشغيل الخادم الأمامي (Vite):
   ```bash
   npm run dev
   ```
3) تشغيل خادم tRPC (تجريبي):
   ```bash
   npm run trpc:dev
   ```
4) إعداد قاعدة البيانات (Drizzle):
   - حدّث متغيرات الاتصال بـ MySQL في `src/server/db/index.ts`.
   - أنشئ قاعدة البيانات المطلوبة.
   - شغّل سكريبتات Drizzle بعد ضبطها لتوليد الجداول من `src/server/db/schema.ts`.

> ملاحظة: قد تتطلب بعض الأوامر ضبط وكيل الشبكة داخل البيئة حسب سياسات الاتصال.

## بنية الملفات الرئيسية
- `src/main.tsx`: تهيئة التطبيق وربط مزوّدات الحالة (المصادقة، اللغة، الثيم، React Query).
- `src/App.tsx`: تجميع الواجهات الرئيسية (السوق، لوحة البائع، لوحة الإدارة، وحدة الجودة بالذكاء الاصطناعي).
- المكونات المشتركة في `src/components/`: تخطيط رئيسي، محدد اللغة، محدد العملة، تبويبات التنقل، بطاقات معلومات.
- السياقات في `src/contexts/`: إدارة اللغة، المستخدم/المصادقة، والثيم.
- الميزات والخطافات في `src/features/` و`src/hooks/`: حواجز الميزات، مساعدات الذكاء الاصطناعي، خطافات المصادقة واللغة.
- التكوين الدولي والبيانات المساعدة في `src/lib/`: تعريف اللغات، العملات، مراحل الميزات، وأنواع مشتركة.
- قاعدة البيانات في `src/server/db/schema.ts`: تعريف جميع الجداول (الشركات، الفترات، المستخدمون، الأدوار، الصلاحيات، المنتجات، العروض، المزادات، العملات، أسعار الصرف، المحتوى، الترجمات، ميزات النظام، تقييمات الجودة) مع حقول `company_id` لدعم الـ Multi-Tenant.
- خادم tRPC في `src/server/trpc/`: إعداد السياق، المجمّع العام، ونقطة التشغيل `server.ts`، إضافة إلى الراوترات الوظيفية لكل وحدة (مصادقة، مستخدمين، أدوار، صلاحيات، منتجات، عروض، مزادات، جودة، ميزات، محتوى، لغات، عملات، شركات، فترات).

## الخطوات التالية المقترحة للاستعراض الكامل
- تفعيل الاتصال بقاعدة بيانات MySQL وتشغيل ترحيلات Drizzle لتوليد الجداول.
- إضافة بيانات تجريبية (Seed) لشركة/فترة/مستخدم لعرض الواجهات بالبيانات.
- وصل الواجهات بـ tRPC عبر React Query وربطها بالراوترات المعرّفة.
- تمكين تعدد اللغات والعملات في الواجهة عبر مكونات المحددات وخطافات السياق.
- اختبار وحدة الذكاء الاصطناعي عبر استدعاء `evaluateProductQuality` وتخزين النتائج في جدول `quality_scores`.
